<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:elor="using:Elorucov.Toolkit.UWP.Controls"
    xmlns:vkui="using:VK.VKUI.Controls">
    <DataTemplate x:Key="ConversationDataTemplate">
        <Grid Margin="16,8" Background="Transparent">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <elor:Avatar IsHitTestVisible="False" Width="44" Height="44" ImageUri="{Binding Avatar}" DisplayName="{Binding Title}"/>
            <ContentControl ContentTemplate="{Binding Online, Converter={StaticResource oic}}" HorizontalAlignment="Right" VerticalAlignment="Bottom"/>
            <StackPanel Grid.Column="1" Margin="12,0,0,0">
                <StackPanel Orientation="Horizontal">
                    <TextBlock FontWeight="SemiBold" FontSize="16" Text="{Binding Title}"/>
                    <vkui:VKIcon Id="Icon16Verified" Margin="4,3,0,0" Width="16" Height="16" Visibility="{Binding IsVerified}" Foreground="{ThemeResource VKAccentBrush}"/>
                </StackPanel>
                <TextBlock FontSize="13" Margin="0,3,0,0" MaxLines="1" TextTrimming="CharacterEllipsis" Foreground="{ThemeResource VKTextSubheadBrush}" Text="{Binding LastMessage, Converter={StaticResource mtp}}" Visibility="{Binding ActivityStatus, Converter={StaticResource ntv2}}"/>
                <TextBlock FontSize="13" Margin="0,3,0,0" MaxLines="1" TextTrimming="CharacterEllipsis" Foreground="{ThemeResource VKImTextNameBrush}" Text="{Binding ActivityStatus}" Visibility="{Binding ActivityStatus, Converter={StaticResource ntv}}"/>
            </StackPanel>
            <StackPanel Grid.Column="2" Margin="6,0,0,0">
                <StackPanel Height="20" Orientation="Horizontal" Margin="0,2,0,0" HorizontalAlignment="Right">
                    <Border MinWidth="20" MinHeight="20" CornerRadius="9" Visibility="{Binding MentionIcon, Converter={StaticResource ntv}}" Background="{ThemeResource VKCounterPrimaryBackgroundBrush}">
                        <ContentPresenter ContentTemplate="{Binding MentionIcon}" Foreground="{ThemeResource VKCounterPrimaryTextBrush}" Width="14" Height="14" Margin="3"/>
                    </Border>
                    <Ellipse Width="20" Height="20" Visibility="{Binding IsMarkedAsUnread, Converter={StaticResource ntv}}" Fill="{ThemeResource VKCounterPrimaryBackgroundBrush}" Margin="8,0,0,0"/>
                    <ContentPresenter Visibility="{Binding UnreadMessagesCount, Converter={StaticResource ntv}}" ContentTemplate="{Binding IsMuted, Converter={StaticResource ctt}}" Margin="8,0,0,0"/>
                    <vkui:VKIcon Id="Icon24Pin" Foreground="{ThemeResource VKIconTertiaryBrush}" Visibility="{Binding IsPinIconShowing, Converter={StaticResource ntv}}" Width="20" Height="20" Margin="8,0,0,0"/>
                </StackPanel>
                <TextBlock FontSize="13" Margin="0,3,0,0" MaxLines="1" TextAlignment="Right" Foreground="{ThemeResource VKTextSubheadBrush}" Text="{Binding LastMessage.SentDateTime, Converter={StaticResource dts}}"/>
            </StackPanel>
        </Grid>
    </DataTemplate>

    <DataTemplate x:Key="ConversationDataTemplateLite">
        <Grid Margin="16,8" Background="Transparent">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>
            <elor:Avatar IsHitTestVisible="False" Width="44" Height="44" ImageUri="{Binding Avatar}" DisplayName="{Binding Title}"/>
            <ContentControl ContentTemplate="{Binding Online, Converter={StaticResource oic}}" HorizontalAlignment="Right" VerticalAlignment="Bottom"/>
            <StackPanel Grid.Column="1" Margin="12,-1,0,0" VerticalAlignment="Center">
                <TextBlock FontWeight="SemiBold" FontSize="16" Text="{Binding Title}"/>
            </StackPanel>
        </Grid>
    </DataTemplate>

    <DataTemplate x:Key="FoundMessageDataTemplate">
        <Grid Margin="16,8" Background="Transparent">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>
            <elor:Avatar IsHitTestVisible="False" Width="44" Height="44" VerticalAlignment="Top" ImageUri="{Binding PeerAvatar}" DisplayName="{Binding PeerName}"/>
            <StackPanel Grid.Column="1" Margin="12,0,0,0">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock FontWeight="SemiBold" FontSize="16" Text="{Binding PeerName}"/>
                    <TextBlock Grid.Column="1" FontSize="13" Margin="6,2,0,0" MaxLines="1" TextAlignment="Right" Foreground="{ThemeResource VKTextSubheadBrush}" Text="{Binding SentDate, Converter={StaticResource dts}}"/>
                </Grid>
                <TextBlock FontSize="13" Margin="0,3,0,0" MaxLines="3" TextWrapping="Wrap" TextTrimming="CharacterEllipsis" Foreground="{ThemeResource VKTextSubheadBrush}" Text="{Binding Text}"/>
            </StackPanel>
        </Grid>
    </DataTemplate>
</ResourceDictionary>
