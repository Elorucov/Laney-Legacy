<elor:Modal
    x:Class="Elorucov.Laney.Views.Modals.PollViewer"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Elorucov.Laney.Views.Modals"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:elor="using:Elorucov.Toolkit.UWP.Controls"
    xmlns:vkui="using:VK.VKUI.Controls"
    mc:Ignorable="d"
    Background="{ThemeResource VKBackgroundContentBrush}" CloseButtonVisibility="Collapsed" DropShadow="True" MaxWidth="480" Margin="8" Padding="0">

    <Grid MinHeight="202">
        <Border x:Name="GradientBackground"/>
        <Border x:Name="PhotoBackground" Height="115" VerticalAlignment="Top">
            <Border x:Name="PhotoGradient" Height="92" VerticalAlignment="Bottom"/>
        </Border>
        <Grid x:Name="ViewRoot" Padding="12,0,12,4">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <StackPanel x:Name="Header" Padding="30">
                <TextBlock x:Name="Title" TextAlignment="Center" FontWeight="SemiBold" FontSize="22" LineHeight="27" LineStackingStrategy="BlockLineHeight" TextWrapping="Wrap" MaxLines="3"/>
                <TextBlock x:Name="Owner" TextAlignment="Center" FontSize="13" Margin="8,8,8,2"/>
                <TextBlock x:Name="Info" TextAlignment="Center" FontSize="13" LineHeight="17" LineStackingStrategy="BlockLineHeight" Margin="0,4,0,0" Opacity="0.6"/>
            </StackPanel>
            <ScrollViewer Grid.Row="1" Margin="0,2,0,4">
                <StackPanel x:Name="Options"/>
            </ScrollViewer>
            <StackPanel x:Name="VotersContainer" Grid.Row="2" Height="48" Orientation="Horizontal" HorizontalAlignment="Center">
                <elor:UserAvatars x:Name="FriendsAvatars" VerticalAlignment="Center" Height="26" Margin="0,0,8,0" MaxDisplayedAvatars="3"/>
                <TextBlock x:Name="Voters" VerticalAlignment="Center" Margin="0,-1,0,0" FontSize="14" Opacity="0.84" TextWrapping="Wrap" MaxLines="2"/>
            </StackPanel>
            <Button x:Name="MultiplePollVoteButton" Grid.Row="2" HorizontalAlignment="Center" Margin="0,8" Padding="16,5,16,6" Style="{StaticResource VKButtonPrimaryMedium}" Visibility="Collapsed" x:Uid="poll_vote"  Click="Vote"/>
            <vkui:Spinner x:Name="VotingSpinner" Grid.Row="2" Width="24" Height="24" Margin="12" HorizontalAlignment="Center" Foreground="{ThemeResource VKButtonPrimaryBackgroundBrush}" Visibility="Collapsed"/>
        </Grid>
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Top" Margin="2">
            <Button x:Name="MoreButton" Style="{StaticResource TransparentButtonStyle}" Width="36" Height="36" Visibility="Collapsed">
                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" Height="24" Width="24" ContentTemplate="{StaticResource Icon24MoreHorizontal}"/>
                <Button.Flyout>
                    <MenuFlyout Placement="Top">
                        <MenuFlyoutItem x:Name="mfShare" Text="{x:Bind Converter={StaticResource loc}, ConverterParameter=share}" Click="SharePoll">
                            <MenuFlyoutItem.Icon>
                                <SymbolIcon Symbol="Share"/>
                            </MenuFlyoutItem.Icon>
                        </MenuFlyoutItem>
                    </MenuFlyout>
                </Button.Flyout>
            </Button>
            <Button x:Name="CloseButton" Style="{StaticResource TransparentButtonStyle}" Width="36" Height="36" Click="CloseModal">
                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" Height="24" Width="24" ContentTemplate="{StaticResource Icon24Cancel}"/>
            </Button>
        </StackPanel>
    </Grid>
</elor:Modal>