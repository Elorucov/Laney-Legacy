<Page
    x:Class="Elorucov.Laney.Views.Settings.SettingsView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Elorucov.Laney.Views.Settings"
    xmlns:vkui="using:VK.VKUI.Controls"
    xmlns:dm="using:Elorucov.Laney.DataModels"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d" SizeChanged="UpdateLayout"
    Background="{ThemeResource VKBackgroundPageBrush}">

    <Page.Resources>
        <Style TargetType="vkui:CellButton">
            <Setter Property="Padding" Value="0"/>
        </Style>
        <Style TargetType="vkui:Group">
            <Setter Property="Margin" Value="0"/>
        </Style>
    </Page.Resources>

    <Grid x:Name="LayoutRoot">
        <VisualStateManager.VisualStateGroups>
            <VisualStateGroup>
                <VisualState x:Name="Small">
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="0"/>
                    </VisualState.StateTriggers>
                    <VisualState.Setters>
                        <Setter Target="LayoutRoot.Background" Value="{ThemeResource VKBackgroundContentBrush}"/>
                        <Setter Target="SubPageContent.Margin" Value="0"/>
                        <Setter Target="SubPageContent.CornerRadius" Value="0"/>
                        <Setter Target="SubPageContent.BorderBrush" Value="Transparent"/>
                        <Setter Target="SubPageContent.BorderThickness" Value="0"/>
                        <Setter Target="MenuItems.Margin" Value="0"/>
                        <Setter Target="Separator.Margin" Value="16,0"/>
                    </VisualState.Setters>
                </VisualState>
                <VisualState x:Name="Tab">
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="840"/>
                    </VisualState.StateTriggers>
                    <VisualState.Setters>
                        <Setter Target="LayoutRoot.Background" Value="Transparent"/>
                        <Setter Target="SubPageContent.Margin" Value="16"/>
                        <Setter Target="SubPageContent.CornerRadius" Value="8"/>
                        <Setter Target="SubPageContent.BorderBrush" Value="{ThemeResource VKInputBorderBrush}"/>
                        <Setter Target="SubPageContent.BorderThickness" Value="1"/>
                        <Setter Target="MenuItems.Margin" Value="0,16"/>
                        <Setter Target="Separator.Margin" Value="0"/>
                    </VisualState.Setters>
                </VisualState>
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>
        <Grid.ColumnDefinitions>
            <ColumnDefinition/>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition/>
        </Grid.RowDefinitions>
        <Border x:Name="TitleBarBackground" Grid.ColumnSpan="4" Background="{ThemeResource VKBackgroundContentBrush}"/>
        <vkui:PageHeader x:Name="MainPageTitleBar" BorderBrush="Transparent" Content="{x:Bind Converter={StaticResource loc}, ConverterParameter=settings}"/>
        <vkui:PageHeader x:Name="SubPageTitleBar" BorderBrush="Transparent">
            <vkui:PageHeader.LeftButtons>
                <vkui:PageHeaderButton x:Name="BackButton" Icon="Icon28ArrowLeftOutline" Click="BackButtonClick"/>
            </vkui:PageHeader.LeftButtons>
        </vkui:PageHeader>
        <Grid x:Name="MainPageContent" Grid.Column="1" Grid.Row="1">
            <ListView x:Name="MenuItems" ItemContainerStyle="{StaticResource SettingsMenuItemStyle}" ItemsSource="{Binding SubPages}" IsItemClickEnabled="True" ItemClick="ListView_ItemClick">
                <ListView.ItemTemplate>
                    <DataTemplate x:DataType="dm:SettingsMenuItem">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>
                            <ContentPresenter Margin="0,10,16,10" Width="28" Height="28" Foreground="{ThemeResource VKAccentBrush}" ContentTemplate="{x:Bind Icon}"/>
                            <TextBlock Grid.Column="1" VerticalAlignment="Center" FontSize="16" LineHeight="20" LineStackingStrategy="BlockLineHeight" Text="{x:Bind Title}"/>
                        </Grid>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>
        </Grid>
        <Border x:Name="SubPageContent" Grid.Column="2" Grid.Row="1" Background="{ThemeResource VKBackgroundContentBrush}">
            <Frame x:Name="SubPageFrame" Navigated="SubPageFrame_Navigated" ContentTransitions="{x:Null}"/>
        </Border>
        <Border x:Name="Separator" Height="1" Grid.ColumnSpan="4" VerticalAlignment="Bottom" Background="{ThemeResource VKSeparatorAlphaBrush}">
            <Border.RenderTransform>
                <CompositeTransform TranslateY="1"/>
            </Border.RenderTransform>
        </Border>
    </Grid>
</Page>