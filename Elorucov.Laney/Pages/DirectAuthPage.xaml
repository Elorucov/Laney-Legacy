<Page
    x:Class="Elorucov.Laney.Pages.DirectAuthPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Elorucov.Laney.Pages"
    xmlns:ctrl="using:Elorucov.Laney.Controls"
    xmlns:elor="using:Elorucov.Toolkit.UWP.Controls"
    xmlns:muxc="using:Microsoft.UI.Xaml.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Background="{ThemeResource MicaLikeAcrylicWindowBrush}" SizeChanged="OnSizeChanged">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <Border x:Name="BoxTopPadding"/>
        
        <Grid x:Name="Box" Grid.Row="1">
            <Border x:Name="BoxBackground" Margin="-1" Background="{ThemeResource NavigationViewContentBackground}" BorderBrush="{ThemeResource NavigationViewContentGridBorderBrush}" BorderThickness="1" CornerRadius="8"/>
            <Grid x:Name="BoxContent" CornerRadius="8">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <Grid x:Name="TitleBar" Margin="12,12,12,0" Height="48">
                    <HyperlinkButton x:Name="BackButton" Width="48" Height="48" Padding="0" Click="GoBack">
                        <ctrl:FixedFontIcon FontSize="20" Glyph=""/>
                    </HyperlinkButton>
                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Top" Margin="12" ContentTemplate="{StaticResource LogoVKID}"/>
                </Grid>

                <TextBlock x:Name="FlowTitle" Grid.Row="1" Margin="24,24,24,-12" Visibility="Collapsed" TextAlignment="Center" Style="{StaticResource SubtitleTextBlockStyle}"/>

                <Grid x:Name="FlowsRoot" Grid.Row="2">
                    <StackPanel x:Name="LoginFlow" Margin="18">
                        <TextBox x:Name="UserName" Margin="6" x:Uid="email_or_phone" IsSpellCheckEnabled="False" IsTextPredictionEnabled="False" KeyUp="OnTextBoxKetUp"/>
                        <muxc:InfoBar Margin="6" IsOpen="True" Severity="Warning" x:Uid="onepass_not_supported"/>
                    </StackPanel>
                    <StackPanel x:Name="PasswordFlow" Margin="18" x:DeferLoadStrategy="Lazy">
                        <TextBlock x:Name="PasswordInfo" Margin="6" TextAlignment="Center" TextWrapping="Wrap"/>
                        <PasswordBox x:Name="Password" Margin="6" x:Uid="password2" KeyUp="OnTextBoxKetUp"/>
                    </StackPanel>
                    <StackPanel x:Name="PhoneValidationFlow" Margin="18" x:DeferLoadStrategy="Lazy">
                        <TextBlock x:Name="PVInfo" Margin="6" TextAlignment="Center" TextWrapping="Wrap"/>
                        <TextBox x:Name="PVCode" HorizontalAlignment="Center" TextAlignment="Center" Margin="6" MaxLength="6" Width="128" InputScope="Digits" IsSpellCheckEnabled="False" IsTextPredictionEnabled="False" KeyUp="OnTextBoxKetUp"/>
                    </StackPanel>
                    <StackPanel x:Name="TwoFAFlow" Margin="18" x:DeferLoadStrategy="Lazy">
                        <TextBlock x:Name="TwoFAInfo" Margin="6" TextAlignment="Center" TextWrapping="Wrap"/>
                        <TextBox x:Name="TwoFACode" HorizontalAlignment="Center" TextAlignment="Center" Margin="6" MaxLength="6" Width="128" InputScope="Digits" IsSpellCheckEnabled="False" IsTextPredictionEnabled="False" KeyUp="OnTextBoxKetUp"/>
                    </StackPanel>
                    <StackPanel x:Name="CaptchaFlow" Margin="18" x:DeferLoadStrategy="Lazy">
                        <TextBlock Margin="6" TextAlignment="Center" x:Uid="enter_captcha"/>
                        <Image x:Name="CaptchaImg" Margin="6" Width="130" Height="50"/>
                        <TextBox x:Name="CaptchaCode" HorizontalAlignment="Center" TextAlignment="Center" Margin="6" MaxLength="10" Width="130" IsSpellCheckEnabled="False" IsTextPredictionEnabled="False" KeyUp="OnTextBoxKetUp"/>
                    </StackPanel>
                    <StackPanel x:Name="SecondPhaseAuthFlow" Margin="18" x:DeferLoadStrategy="Lazy" VerticalAlignment="Center">
                        <muxc:ProgressRing HorizontalAlignment="Center" />
                        <TextBlock x:Name="SPStatus" TextAlignment="Center" Margin="0,12,0,0"/>
                    </StackPanel>
                    <StackPanel x:Name="PhoneValidFinalFlow" Margin="18" x:DeferLoadStrategy="Lazy">
                        <Grid Margin="6">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>
                            <elor:Avatar x:Name="ProfileAvatar" Margin="0,0,12,0" Width="48" Height="48"/>
                            <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                <TextBlock x:Name="ProfileName" Style="{StaticResource SubtitleTextBlockStyle}"/>
                                <TextBlock x:Name="ProfilePhone" Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                            </StackPanel>
                        </Grid>
                        <PasswordBox x:Name="Password2" Margin="6" x:Uid="password2" KeyUp="OnTextBoxKetUp"/>
                    </StackPanel>
                </Grid>

                <TextBlock x:Name="Error" Grid.Row="3" Margin="24,0,24,24" VerticalAlignment="Top" Visibility="Collapsed" TextWrapping="Wrap" Foreground="{ThemeResource SystemControlErrorTextForegroundBrush}"/>

                <StackPanel Grid.Row="4" Margin="18">
                    <Border x:Name="AdditionalArea" Margin="6"/>
                    <Button x:Name="AuthBtn" Margin="6" Style="{StaticResource AccentButtonStyle}" HorizontalAlignment="Stretch" x:Uid="wlc_loginb"/>
                </StackPanel>
            </Grid>
        </Grid>

        <Border x:Name="BoxBottomPadding" Grid.Row="2"/>
    </Grid>
</Page>