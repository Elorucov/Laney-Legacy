<elor:OverlayModal
    x:Class="Elorucov.Laney.Pages.Popups.WhoReadMessagePopup"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Elorucov.Laney.Pages.Popups"
    xmlns:muxc="using:Microsoft.UI.Xaml.Controls"
    xmlns:elor="using:Elorucov.Toolkit.UWP.Controls"
    xmlns:mdl="using:Elorucov.Laney.Models"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    d:DesignHeight="442"
    d:DesignWidth="298"
    Background="Transparent" Tapped="OnTapped">
    <elor:OverlayModal.Transitions>
        <TransitionCollection>
            <PopupThemeTransition FromVerticalOffset="-32"/>
        </TransitionCollection>
    </elor:OverlayModal.Transitions>

    <Grid x:Name="Root" TabFocusNavigation="Local" HorizontalAlignment="Left" VerticalAlignment="Top" Width="298" Height="442" Background="{ThemeResource AcrylicInAppFillColorDefaultBrush}" BorderBrush="{ThemeResource SurfaceStrokeColorFlyoutBrush}" BorderThickness="1" CornerRadius="{ThemeResource OverlayCornerRadius}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition/>
        </Grid.RowDefinitions>

        <Border Grid.Row="2" Background="{ThemeResource LayerOnAcrylicFillColorDefaultBrush}" BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}" BorderThickness="0,1,0,0"/>

        <TextBlock x:Name="Title" Margin="12,7" Style="{StaticResource BodyStrongTextBlockStyle}" Text=" "/>
        <AutoSuggestBox x:Name="ViewersSearchBox" x:DeferLoadStrategy="Lazy" Grid.Row="1" Margin="12,2,12,12" QueryIcon="Find" x:Uid="ViewersSearchBox" QuerySubmitted="DoSearch"/>

        <ListView x:Name="ViewersList" Grid.Row="2" VerticalAlignment="Top" SelectionMode="None" IsItemClickEnabled="True" ShowsScrollingPlaceholders="False" ItemContainerStyle="{ThemeResource WinUIListViewItemStyle}" ItemClick="OpenProfile" Loaded="GetScrollViewer">
            <ListView.ItemTemplate>
                <DataTemplate x:DataType="mdl:Entity">
                    <StackPanel Orientation="Horizontal" Height="32">
                        <elor:Avatar Width="24" Height="24" Margin="12,4,0,4" DisplayName="{x:Bind Title}" ImageSource="{x:Bind Image, Converter={StaticResource bic}}"/>
                        <TextBlock Margin="12,6,0,0" Style="{StaticResource BodyTextBlockStyle}" Foreground="{ThemeResource ApplicationForegroundThemeBrush}" Text="{x:Bind Title}"/>
                    </StackPanel>
                </DataTemplate>
            </ListView.ItemTemplate>
            <ListView.Header>
                <Border Height="5"/>
            </ListView.Header>
            <ListView.Footer>
                <muxc:ProgressRing x:Name="Loader" Grid.Row="2" HorizontalAlignment="Center" IsActive="False" Width="32" Height="32"/>
            </ListView.Footer>
        </ListView>
    </Grid>
</elor:OverlayModal>