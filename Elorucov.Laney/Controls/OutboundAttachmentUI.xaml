<UserControl
    x:Class="Elorucov.Laney.Controls.OutboundAttachmentUI"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Elorucov.Laney.Controls"
    xmlns:converters2="using:Elorucov.Laney.Services.Converters"
    xmlns:converters="using:Elorucov.Laney.Services.Converters.MessageItem"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d" MinWidth="104" MinHeight="78"
    d:DesignHeight="300"
    d:DesignWidth="400">

    <UserControl.Resources>
        <converters:NullToVisibility x:Key="vis"/>
        <converters2:ValueToBool x:Key="vtb"/>
    </UserControl.Resources>

    <Grid Background="{ThemeResource ControlFillColorSecondaryBrush}" BorderBrush="{ThemeResource ControlStrokeColorSecondaryBrush}" BorderThickness="1" CornerRadius="4">
        <StackPanel VerticalAlignment="Center">
            <local:FixedFontIcon HorizontalAlignment="Center" Width="16" Height="16" Glyph="{Binding Icon, Mode=OneWay}"/>
            <TextBlock TextAlignment="Center" FontSize="13" Text="{Binding DisplayName, Mode=OneWay}" TextWrapping="Wrap" MaxLines="2" TextTrimming="CharacterEllipsis"/>
        </StackPanel>
        <Image Source="{Binding PreviewImage, Mode=OneWay}" Stretch="UniformToFill" HorizontalAlignment="Center" VerticalAlignment="Center"/>
        <Border Margin="6" HorizontalAlignment="Right" VerticalAlignment="Bottom" Background="#7F000000" CornerRadius="3" Height="24" Visibility="{Binding ExtraInfo, Converter={StaticResource vis}, Mode=OneWay}">
            <TextBlock Text="{Binding ExtraInfo, Mode=OneWay}" Foreground="White" FontSize="11" LineHeight="11" LineStackingStrategy="BlockLineHeight" VerticalAlignment="Center" Padding="7,0"/>
        </Border>
        <ProgressBar Margin="4" BorderBrush="#7F000000" VerticalAlignment="Bottom" BorderThickness="1" Background="#7F000000" Foreground="White" Visibility="{Binding UploadState, Mode=OneWay, Converter={StaticResource vtb}, ConverterParameter=InProgress}" Value="{Binding UploadProgress, Mode=OneWay}"/>
        <Button Width="28" Height="28" Padding="0" HorizontalAlignment="Right" VerticalAlignment="Top" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" Background="Transparent" BorderThickness="0" Click="OnRemoveClick">
            <Border Width="20" Height="20" CornerRadius="10" Background="#7F000000">
                <ContentPresenter Foreground="White" ContentTemplate="{StaticResource Icon16Cancel}" Width="12" Height="12"/>
            </Border>
        </Button>
        <Button Width="28" Height="28" Padding="0" HorizontalAlignment="Left" VerticalAlignment="Top" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" Background="Transparent" BorderThickness="0" Click="OnErrorInfoClick" Visibility="{Binding UploadState, Mode=OneWay, Converter={StaticResource vtb}, ConverterParameter=Failed}">
            <Border Width="20" Height="20" CornerRadius="10" Background="#FF0000">
                <ContentPresenter Foreground="White" ContentTemplate="{StaticResource Icon24Error}" Width="12" Height="12"/>
            </Border>
        </Button>
    </Grid>
</UserControl>